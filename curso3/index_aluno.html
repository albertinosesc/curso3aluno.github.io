<html><head><base href="https://websimcreationengine.com/music-course-student/">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Curso de Música - Área do Aluno</title>
<style>
  body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 0;
    background: linear-gradient(45deg, #e3eeff 0%, #f3e7e9 100%);
  }
  .container {
    width: 80%;
    margin: auto;
    overflow: hidden;
    padding: 20px;
  }
  header {
    background: #333;
    color: #fff;
    padding-top: 30px;
    min-height: 70px;
    border-bottom: #bbb 3px solid;
  }
  header h1 {
    text-align: center;
    margin: 0;
    padding-bottom: 20px;
  }
  .lesson-content {
    background: #fff;
    padding: 20px;
    margin-top: 20px;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  .btn {
    display: inline-block;
    background: #333;
    color: #fff;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    border-radius: 5px;
    text-decoration: none;
    margin-top: 10px;
  }
  .btn:hover {
    background: #555;
  }
  .abc-notation {
    margin-top: 20px;
  }
  #midi-player {
    margin-top: 10px;
  }
  .score-container {
    background-color: #f0f0f0;
    padding: 10px;
    border-radius: 5px;
    margin-top: 20px;
    text-align: center;
  }
  .score {
    font-size: 24px;
    font-weight: bold;
    color: #333;
  }
  .modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
  }
  .modal-content {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 500px;
    border-radius: 5px;
    text-align: center;
  }
  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
  }
  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }

  /* Some basic CSS to make the Audio controls in abcjs presentable. */

.abcjs-inline-audio {
	height: 26px;
	padding: 0 5px;
	border-radius: 3px;
	background-color: #424242;
	display: flex;
	align-items: center;
	box-sizing: border-box;
}

.abcjs-inline-audio.abcjs-disabled {
	opacity: 0.5;
}

.abcjs-inline-audio .abcjs-btn {
	display: block;
	width: 28px;
	height: 34px;
	margin-right: 2px;
	padding: 7px 4px;

	background: none !important;
	border: 1px solid transparent;
	box-sizing: border-box;
	line-height: 1;
}

.abcjs-btn g {
	fill: #f4f4f4;
	stroke: #f4f4f4;
}

.abcjs-inline-audio .abcjs-btn:hover g {
	fill: #cccccc;
	stroke: #cccccc;
}

.abcjs-inline-audio .abcjs-midi-selection.abcjs-pushed {
	border: 1px solid #cccccc;
	background-color: #666666;
	box-sizing: border-box;
}

.abcjs-inline-audio .abcjs-midi-loop.abcjs-pushed {
	border: 1px solid #cccccc;
	background-color: #666666;
	box-sizing: border-box;
}

.abcjs-inline-audio .abcjs-midi-reset.abcjs-pushed {
	border: 1px solid #cccccc;
	background-color: #666666;
	box-sizing: border-box;
}

.abcjs-inline-audio .abcjs-midi-start .abcjs-pause-svg {
	display: none;
}

.abcjs-inline-audio .abcjs-midi-start .abcjs-loading-svg {
	display: none;
}

.abcjs-inline-audio .abcjs-midi-start.abcjs-pushed .abcjs-play-svg {
	display: none;
}

.abcjs-inline-audio .abcjs-midi-start.abcjs-loading .abcjs-play-svg {
	display: none;
}

.abcjs-inline-audio .abcjs-midi-start.abcjs-pushed .abcjs-pause-svg {
	display: block;
}

.abcjs-inline-audio .abcjs-midi-progress-background {
	background-color: #424242;
	height: 10px;
	border-radius: 5px;
	border: 2px solid #cccccc;
	margin: 0 8px 0 15px;
	position: relative;
	flex: 1;
	padding: 0;
	box-sizing: border-box;
}

.abcjs-inline-audio .abcjs-midi-progress-indicator {
	width: 20px;
	margin-left: -10px; /* half of the width */
	height: 14px;
	background-color: #f4f4f4;
	position: absolute;
	display: inline-block;
	border-radius: 6px;
	top: -4px;
	left: 0;
	box-sizing: border-box;
}

.abcjs-inline-audio .abcjs-midi-clock {
	margin-left: 4px;
	margin-top: 1px;
	margin-right: 2px;
	display: inline-block;
	font-family: sans-serif;
	font-size: 16px;
	box-sizing: border-box;
	color: #f4f4f4;
}

.abcjs-inline-audio .abcjs-tempo-wrapper {
	font-size: 10px;
	color: #f4f4f4;
	box-sizing: border-box;
	display: flex;
	align-items: center;
}

.abcjs-inline-audio .abcjs-midi-tempo {
	border-radius: 2px;
	border: none;
	margin: 0 2px 0 4px;
	width: 42px;
	padding-left: 2px;
	box-sizing: border-box;
}

.abcjs-inline-audio .abcjs-loading .abcjs-loading-svg {
	display: inherit;
}

.abcjs-inline-audio .abcjs-loading {
	outline: none;
	animation-name: abcjs-spin;
	animation-duration: 1s;
	animation-iteration-count: infinite;
	animation-timing-function: linear;

}
.abcjs-inline-audio .abcjs-loading-svg circle {
	stroke: #f4f4f4;
}

@keyframes abcjs-spin {
	from {transform:rotate(0deg);}
	to {transform:rotate(360deg);}
}

/* Adding the class "abcjs-large" will make the control easier on a touch device. */
.abcjs-large .abcjs-inline-audio {
	height: 52px;
}
.abcjs-large .abcjs-btn {
	width: 56px;
	height: 52px;
	font-size: 28px;
	padding: 6px 8px;
}
.abcjs-large .abcjs-midi-progress-background {
	height: 20px;
	border: 4px solid #cccccc;
}
.abcjs-large .abcjs-midi-progress-indicator {
	height: 28px;
	top: -8px;
	width: 40px;
}
.abcjs-large .abcjs-midi-clock {
	font-size: 32px;
	margin-right: 10px;
	margin-left: 10px;
	margin-top: -1px;
}
.abcjs-large .abcjs-midi-tempo {
	font-size: 20px;
	width: 50px;
}
.abcjs-large .abcjs-tempo-wrapper {
	font-size: 20px;
}

.abcjs-css-warning {
	display: none;
}

</style>
</head>
<body>
  <header>
    <div class="container">
      <h1>Área do Aluno - Curso de Música</h1>
    </div>
  </header>

  <div class="container">
    <div class="score-container">
      Pontuação Total: <span id="totalScore" class="score">0</span>
    </div>
    <div class="lesson-content">
      <h2 id="lessonTitle"></h2>
      <div id="lessonContent"></div>
      <div class="abc-notation">
        <div id="notation"></div>
        <div id="midi-player"></div>
      </div>
      <button id="completeLesson" class="btn">Completar Lição</button>
      <button id="nextLesson" class="btn" style="display: none;">Próxima Lição</button>
    </div>
  </div>

  <div id="scoreModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Parabéns!</h2>
      <p>Você completou a lição e ganhou <span id="lessonScore"></span> pontos!</p>
      <p>Sua pontuação total agora é: <span id="modalTotalScore"></span></p>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/abcjs/6.2.2/abcjs-basic-min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const lessonTitle = document.getElementById('lessonTitle');
      const lessonContent = document.getElementById('lessonContent');
      const completeLessonBtn = document.getElementById('completeLesson');
      const nextLessonBtn = document.getElementById('nextLesson');
      const totalScoreDisplay = document.getElementById('totalScore');
      const modal = document.getElementById('scoreModal');
      const closeModal = document.querySelector('.close');
      const lessonScoreDisplay = document.getElementById('lessonScore');
      const modalTotalScoreDisplay = document.getElementById('modalTotalScore');

      let lessons = JSON.parse(localStorage.getItem('musicLessons')) || [];
      let currentLessonIndex = 0;
      let totalScore = parseInt(localStorage.getItem('totalScore')) || 0;

      function updateTotalScoreDisplay() {
        totalScoreDisplay.textContent = totalScore;
      }

      function renderLesson(index) {
        if (index < lessons.length) {
          const lesson = lessons[index];
          lessonTitle.textContent = lesson.title;
          lessonContent.innerHTML = lesson.content;
          completeLessonBtn.style.display = 'inline-block';
          nextLessonBtn.style.display = 'none';

          if (lesson.abcNotation) {
            const abcOptions = {
              responsive: 'resize',
              add_classes: true,
              clickListener: (abcElem) => {
                const lastClicked = document.querySelector('.abcjs-note_selected');
                if (lastClicked) lastClicked.classList.remove('abcjs-note_selected');
                abcElem.elementos.forEach(element => {
                  element.classList.add('abcjs-note_selected');
                });
              }
            };

            ABCJS.renderAbc('notation', lesson.abcNotation, abcOptions);

            if (ABCJS.synth.supportsAudio()) {
              const midiPlayer = new ABCJS.synth.SynthController();
              midiPlayer.load('#midi-player', null, {
                displayLoop: true,
                displayRestart: true,
                displayPlay: true,
                displayProgress: true,
                displayWarp: true
              });
              const visualObj = ABCJS.renderAbc('*', lesson.abcNotation)[0];
              const createSynth = new ABCJS.synth.CreateSynth();
              createSynth.init({ visualObj: visualObj }).then(() => {
                midiPlayer.setTune(visualObj, false, { qpm: 90 });
              });
            } else {
              document.getElementById('midi-player').innerHTML = "Seu navegador não suporta áudio MIDI.";
            }
          } else {
            document.getElementById('notation').innerHTML = "";
            document.getElementById('midi-player').innerHTML = "";
          }
        } else {
          lessonTitle.textContent = "Fim do Curso";
          lessonContent.innerHTML = "Parabéns! Você completou todas as lições.";
          document.getElementById('notation').innerHTML = "";
          document.getElementById('midi-player').innerHTML = "";
          completeLessonBtn.style.display = 'none';
          nextLessonBtn.style.display = 'none';
        }
      }

      completeLessonBtn.addEventListener('click', function() {
        const lessonScore = Math.floor(Math.random() * 51) + 50; // Random score between 50 and 100
        totalScore += lessonScore;
        localStorage.setItem('totalScore', totalScore);
        updateTotalScoreDisplay();

        lessonScoreDisplay.textContent = lessonScore;
        modalTotalScoreDisplay.textContent = totalScore;
        modal.style.display = "block";

        completeLessonBtn.style.display = 'none';
        nextLessonBtn.style.display = 'inline-block';
      });

      nextLessonBtn.addEventListener('click', function() {
        currentLessonIndex++;
        renderLesson(currentLessonIndex);
      });

      closeModal.onclick = function() {
        modal.style.display = "none";
      }

      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }

      updateTotalScoreDisplay();
      renderLesson(currentLessonIndex);
    });
  </script>
</body></html>